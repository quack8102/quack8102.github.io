

# Problem A: 小卖部 - solution

## T1  
  
\---  
  
### 算法1  
  
我会暴力！  
  
每次询问暴力求解。  
  
时间复杂度$O(nqc)$  
  
\---  
  
### 算法2  
  
我会分块!  
  
将原序列分成$\sqrt{n}$块，询问时加入$\sqrt{n}$个零散元素。  
  
时间复杂度$O(\sqrt{n}Qc)$。  
  
\---  
  
### 算法3  
  
我会猫树！  
  
[猫树介绍](http://immortalco.blog.uoj.ac/blog/2102)。  
  
直接使用猫树维护，询问时$O(1)$合并即可。  
  
时间复杂度$O((n \log n+Q)c)$。  
  
\---  
  
### 算法4  
  
我会分析性质！  
  
考虑把答案看成生成函数形式。不难发现一个背包形如$\frac{1-x^{(a_i+1)b_i}}{1-x^{b_i}}$。  
  
则答案可以看成是若干个形如$1-x^i$进行相乘或相除得到的结果。  
  
求前缀和相当于增加了一个个数无穷，且价格为$1$的物品。  
  
\---  
  
预处理出来对于每个前缀的$\frac{1-x^{(a_i+1)b_i}}{1-x^{b_i}}$的乘积以及其逆。  
  
询问变成询问两个多项式乘积的单点点值，直接暴力即可。  
  
时间复杂度$O((n+Q)c)$  
  
\---  
  
  

